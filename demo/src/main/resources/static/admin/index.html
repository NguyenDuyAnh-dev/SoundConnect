<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Admin Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 24px; }
    .card { border: 1px solid #ddd; border-radius: 8px; padding: 16px; margin: 8px 0; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 12px; }
    h1 { margin-bottom: 16px; }
    code { background: #f6f8fa; padding: 2px 6px; border-radius: 4px; }
  </style>
  <script>
    async function loadStats() {
      const token = localStorage.getItem('token');
      const res = await fetch('/identity/admin/dashboard', {
        headers: { 'Authorization': token ? `Bearer ${token}` : '' }
      });
      const data = await res.json();
      const s = data.result || {};
      document.getElementById('users_total').innerText = s.users_total ?? '-';
      document.getElementById('users_active').innerText = s.users_active ?? '-';
      document.getElementById('users_banned').innerText = s.users_banned ?? '-';
      document.getElementById('posts_total').innerText = s.posts_total ?? '-';
      document.getElementById('comments_total').innerText = s.comments_total ?? '-';
      document.getElementById('sale_posts_total').innerText = s.sale_posts_total ?? '-';
      document.getElementById('sale_posts_active').innerText = s.sale_posts_active ?? '-';
      document.getElementById('total_revenue').innerText = s.total_revenue ? s.total_revenue.toLocaleString('vi-VN') + ' VNƒê' : '-';
    }
    window.addEventListener('DOMContentLoaded', loadStats);
  </script>
 </head>
 <body>
   <h1>Admin Dashboard</h1>
   <div class="grid">
     <div class="card">Users total: <b id="users_total">...</b></div>
     <div class="card">Users active: <b id="users_active">...</b></div>
     <div class="card">Users banned: <b id="users_banned">...</b></div>
     <div class="card">Posts total: <b id="posts_total">...</b></div>
     <div class="card">Comments total: <b id="comments_total">...</b></div>
     <div class="card">Sale Posts total: <b id="sale_posts_total">...</b></div>
     <div class="card">Sale Posts active: <b id="sale_posts_active">...</b></div>
     <div class="card">Total Revenue: <b id="total_revenue">...</b></div>
   </div>
   <p>API base is <code>/identity</code>. Save JWT as <code>localStorage.token</code> to authorize.</p>
 </body>
 </html>


